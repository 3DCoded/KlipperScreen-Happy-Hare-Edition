# ERCF Happy Hare KlipperScreen menus. Don't remove this line, installer needs it!
#
# # Copyright (C) 2022  moggieuk#6538 (discord)
#
# Menu options:
# name, icon, panel, method, confirm, enable, params, style, show_disabled, refresh_on
#
# Additional to KlipperScreen doc:
# show_disabled - True will cause 'enable' logic to show button disabled rather than not display it
# refresh_on - List of printer variables to monitor real time for 'show_disabled' 
#

[menu __main ercf]
name: {{ gettext('Manage ERCF') }}
icon: ercf_carrot
panel: ercf_panel
enable: {{ printer.extruders.count > 0 }}

# ---------- ERCF manage submenu
#
#[menu __main ercf home]
#name: {{ gettext('Home Selector') }}
#icon: home
#method: printer.gcode.script
#params: {"script":"ERCF_HOME"}
#
#[menu __main ercf servoup]
#name: {{ gettext('Servo UP') }}
#icon: arrow-up
#method: printer.gcode.script
#params: {"script":"ERCF_SERVO_UP"}
#enable: {{ printer.ercf.servo != "Up" }}
#show_disabled: True
#refresh_on: printer.ercf.servo
#
#[menu __main ercf servodown]
#name: {{ gettext('Servo Down') }}
#icon: arrow-down
#method: printer.gcode.script
#params: {"script":"ERCF_SERVO_DOWN"}
#enable: {{ printer.ercf.servo != "Down" }}
#show_disabled: True
#refresh_on: printer.ercf.servo
#
#[menu __main ercf motoroff]
#name: {{ gettext('Disable Motors') }}
#icon: motor-off
#method: printer.gcode.script
#confirm: "This will invalidate selector position and require rehoming\n\nAre you sure?"
#params: {"script":"ERCF_MOTORS_OFF"}

[menu __main ercf select_tools]
name: {{ gettext('Select Tool...') }}
icon: extruder
enable: {{ printer.idle_timeout.state != "Printing" }}
show_disabled: True
refresh_on: printer.idle_timeout.state

ERCF_iter_select_tools

ERCF_iter_select_gates
[menu __main ercf select_gates]
name: {{ gettext('Select Gate...') }}
icon: ercf_select0
enable: {{ printer.idle_timeout.state != "Printing" }}
show_disabled: True
refresh_on: printer.idle_timeout.state

ERCF_iter_select_gates

[menu __main ercf check_gates]
name: {{ gettext('Check Gate...') }}
icon: ercf_checkgates
enable: {{ printer.idle_timeout.state != "Printing" }}
show_disabled: True
refresh_on: printer.idle_timeout.state

ERCF_iter_check_gates

[menu __main ercf preload_gates]
name: {{ gettext('Preload Gate...') }}
icon: ercf_reset
enable: {{ printer.idle_timeout.state != "Printing" }}
show_disabled: True
refresh_on: printer.idle_timeout.state

ERCF_iter_preload_gates

[menu __main ercf stats]
name: {{ gettext('Stats/Status...') }}
icon: ercf_status

[menu __main ercf spare1]
name: {{ gettext('Spare1') }}
icon: ercf_carrot

[menu __main ercf spare2]
name: {{ gettext('Spare2') }}
icon: ercf_carrot

[menu __main ercf spare3]
name: {{ gettext('Spare3') }}
icon: ercf_carrot
enable: False
#
# ---------- ERCF Manage submenu end


# ---------- ERCF Manage/Stats submenu
#
[menu __main ercf stats status]
name: {{ gettext('Display Full Status') }}
icon: ercf_status
method: printer.gcode.script
params: {"script":"ERCF_STATUS"}

[menu __main ercf stats reset]
name: {{ gettext('Reset Stats') }}
icon: ercf_stats_reset
method: printer.gcode.script
confirm: "Are you sure you want to reset ERCF statistics?"
params: {"script":"ERCF_RESET_STATS"}

[menu __main ercf stats dump]
name: {{ gettext('Display Print Stats') }}
icon: ercf_stats_dump
method: printer.gcode.script
params: {"script":"ERCF_DUMP_STATS"}
#
# ---------- ERCF Manage/Stats end


# ---------- ERCF config/calibration menu
#
[menu __main config ercf_calib]
name: {{ gettext('ERCF Calibration') }}
icon: ercf_gear

[menu __main config ercf_calib formtip]
name: {{ gettext('Form Tip') }}
icon: ercf_formtip
method: printer.gcode.script
params: {"script":"ERCF_FORM_TIP_STANDALONE FINAL_EJECT=1"}

[menu __main config ercf_calib grip]
name: {{ gettext('Test Grop') }}
icon: ercf_grip
method: printer.gcode.script
params: {"script":"ERCF_TEST_GRIP"}

[menu __main config ercf_calib encoder]
name: {{ gettext('Encoder') }}
icon: ercf_encodercal
method: printer.gcode.script
params: {"script":"ERCF_CALIBRATE_ENCODER"}

[menu __main config ercf_calib all]
name: {{ gettext('Calibrate ALL') }}
icon: extruder
method: printer.gcode.script
confirm: "This will calibrate all gates\n\nAre you sure?"
params: {"script":"ERCF_CALIBRATE"}

ERCF_iter_calibration
#
# ---------- ERCF config/calibration end



# PAUL temp...
[printer BigRed]
moonraker_host: 192.168.0.103
moonraker_port: 7125
moonraker_api_key: False
camera_url: http://192.168.0.103/webcam/?action=stream

[printer BabyBlue]
moonraker_host: 192.168.0.102
moonraker_port: 7125
moonraker_api_key: False
camera_url: http://192.168.0.102/webcam/?action=stream

#~# --- Do not edit below this line. This section is auto generated --- #~#
#~#
#~# [main]
#~# 24htime = False
#~# confirm_estop = True
#~# use_dpms = False
#~# print_sort_dir = date_desc
#~#
